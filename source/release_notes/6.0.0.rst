.. _PSMDB-6.0.2-1:

================================================================================
*Percona Server for MongoDB* 6.0.2-1
================================================================================

:Date: October , 2022
:Installation: `Installing Percona Server for MongoDB <https://www.percona.com/doc/percona-server-for-mongodb/6.0/install/index.html>`_


We are pleased to announce the availability of Percona Server for MongoDB (PSMDB) 6.0.2-1 – the new major version of the source available, drop-in replacement of MongoDB 6.0 Community edition. It is available for `download from Percona website <https://www.percona.com/downloads/percona-server-mongodb-6.0/#>`_ and for `installation from Percona Software Repositories <https://www.percona.com/doc/percona-server-for-mongodb/6.0/install/index.html>`_.

PSMDB 6.0.2-1 fully supports MongoDB 6.0 protocols and drivers and does not require any code modifications.

PSMDB 6.0.2-1 includes all the features of MongoDB 6.0 Community Edition. These include enhancements to the existing features, plus a bunch of new ones. 

Among new features are the following:

* `Enhanced time series collections <https://www.mongodb.com/docs/v6.0/core/timeseries-collections/#std-label-manual-timeseries-collection>`_ enable you to:
  
  - Get deeper data analysis insights by building compound and `secondary indexes <https://www.mongodb.com/docs/v6.0/core/timeseries/timeseries-secondary-index/#std-label-timeseries-add-secondary-index-mongodb-6.0>`_ on time, metadata and measurement fields.  
  - Distribute the load among nodes in the cluster by `sharding <https://www.mongodb.com/docs/v6.0/core/timeseries/timeseries-shard-collection/#std-label-manual-timeseries-shard-collection>`_ new and existing time series collections.
  - Benefit from faster reads and improved performance by applying the sorting on the most recent entry instead of the whole collection.
    
* The following `change streams <https://www.mongodb.com/docs/v6.0/changeStreams/#std-label-changeStreams>`_ optimizations help you enhance your event-driven solutions:
  
  - Improve in-app notifications, reference deleted documents or feed the updated version of the entire doc to the downstream system using the `before and after states of a document that was changed <https://www.mongodb.com/docs/v6.0/reference/method/db.collection.watch/#std-label-db.collection.watch-change-streams-pre-and-post-images-example>`_.
  - React not only to data changes but also to database change events like creating or dropping of collections with the Data Definition Language (DDL) support.

* New aggregation stages like ``$densify``, ``$documents``, ``$fill`` and operators like ``$bottom``, ``$firstN``, ``$lastN``, ``$maxN`` / ``$minN`` and others enable you to off load work from your developers to the database. These operators allow automating key commands, getting required data insights by combining individual operators into aggregation pipelines. As a result, your developers spend less time on writing complex code or manipulating data manually and can focus on other activities.  
* `Cluster-wide configuration parameters <https://www.mongodb.com/docs/v6.0/reference/cluster-parameters/#std-label-cluster-parameters>`_ and commands save your DBAs' time on cluster administration.
* The `Stable API <https://www.mongodb.com/docs/v6.0/reference/stable-api/#std-label-stable-api>`_ (formerly known as versioned API) features the extended set of new database commands and aggregation operators which enables you to improve communication of your apps and MongoDB.
* Speed up data processing and save on storage costs with `clustered collections <https://www.mongodb.com/docs/v6.0/core/clustered-collections/#std-label-clustered-collections>`_. Clustered collections don’t require secondary indexes and thus, result in faster queries. A single read/write for the index and the document improves performance for inserts, updates, deletes and queries. With less storage space required by clustered connections, bulk updates and inserts are performed faster. And by turning clustered indexes to TTL indexes with a single field, you benefit from simplified delete operations and reduced storage costs.

In addition, |PSMDB| includes the following bug fixes and enhancements provided upstream:

* `SERVER-68511 <https://jira.mongodb.org/browse/SERVER-68511>`_ - Fixed the issue that caused inconsistency in sharding metadata when running the ``movePrimary`` command on the database that has the Feature Compatibility Version (FCV) set to 4.4 or earlier. Affects MongoDB versions 5.0.0 through 5.0.10 and MongoDB 6.0.0. Upgrade to the the fixed version of MongoDB 6.0.2 / Percona Server for MongoDB 6.0.2-1 as soon as possible.
* `SERVER-66072 <https://jira.mongodb.org/browse/SERVER-66072>`_ - Fixed dependency analysis for ``$match`` aggregation stage with aggregation expressions with the ``$rand`` operator
* `SERVER-68130 <https://jira.mongodb.org/browse/SERVER-68130>`_ - Fixed the AutoSplitVector's behavior to predict the BSON object size when generating the response
* `WT-9870 <https://jira.mongodb.org/browse/WT-9870>`_ - Fixed the global time window state before performing the rollback to stable operation by updating the pinned timestamp as part of the transaction setup.

Find the full list of new features and improvements in `MongoDB 6.0 Community Edition release notes <https://www.mongodb.com/docs/v6.0/release-notes/6.0/>`_.

Percona Server for MongoDB 6.0.2-1 extends this feature set by providing enterprise-level enhancements for free.

To upgrade to PSMDB, see our :ref:`upgrade instructions <install/upgrade_from_50>`.

